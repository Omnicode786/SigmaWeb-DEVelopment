<section class="ask-section bg-dark">
  <h2 class="mb-4 text-center fw-bold">
    <i class="bi bi-chat-dots"></i> Ask Community
  </h2>

  <% if (currentUser) { %>
    <form id="create-thread-form" method="post" action="/create_thread" 
          class="card bg-dark text-light border border-secondary p-4 mb-5">
      <div class="mb-3">
        <input class="form-control bg-dark text-light border-secondary" 
               name="title" placeholder="Title" required />
      </div>
      <div class="mb-3">
        <textarea class="form-control bg-dark text-light border-secondary" 
                  name="content" placeholder="Details..." rows="5" required></textarea>
      </div>
      <button type="submit" class="btn btn-outline-light w-100">
        <i class="bi bi-send"></i> Post Question
      </button>
    </form>
  <% } else { %>
    <p class="text-center">
      <a href="/login" class="btn btn-primary">Login</a> to ask a question.
    </p>
  <% } %>

  <h3 class="fw-bold mb-3 bg-dark">Threads</h3>
  <div class="threads d-flex flex-column gap-3">
    <% threads.forEach(t => { %>
      <div class="thread-card card bg-dark text-light border border-secondary p-3">
        <a href="/thread/<%= t._id %>" class="text-decoration-none text-light">
          <h4 class="fw-bold"><%= t.title %></h4>
        </a>
        <p class="text-secondary">
          <%= t.content.length > 200 ? t.content.slice(0,200)+'...' : t.content %>
        </p>
        <small class="text-muted">
          by <%= t.author ? t.author.username : 'Unknown' %> â€¢ 
          <%= new Date(t.createdAt).toLocaleString() %>
        </small>
      </div>
    <% }) %>
  </div>
</section>
